# Kotlin Extensions for StoreKit2 CocoaTouch Binding[**MobiVM**](https://github.com/MobiVM/robovm) - [**bro-gen**](https://github.com/dkimitsa/robovm-bro-gen) - [**bro-gen tutorial**](https://dkimitsa.github.io/2017/10/19/bro-gen-tutorial/) - [**dkimitsa’s dev blog**](https://dkimitsa.github.io/)This repository provides Kotlin extensions for the [StoreKit2 CocoaTouch binding](../storekit2). These extensions add suspendable versions of callback-based Java methods, enabling structured concurrency usage as intended by Apple for StoreKit2.Because Kotlin cannot add a `Companion` object to Java classes to extend them with static methods, the following wrapper objects were introduced, and extensions were added to them:```kotlinobject AppStoreKtobject ProductKt {    object PromotionInfoKt    object SubscriptionInfoKt}object TransactionKtobject AppTransactionKtobject ExternalLinkAccountKtobject ExternalPurchaseKtobject ExternalPurchaseCustomLinkKtobject ExternalPurchaseLinkKtobject PaymentMethodBindingKtobject StorefrontKt```### Example```kotlin/** * @since Available in iOS 16.0 and later. * @throws org.robovm.apple.foundation.NSErrorException */suspend fun AppStoreKt.presentOfferCodeRedeemSheet(scene: UIWindowScene) = suspendCancellableTask { cont ->    AppStore.presentOfferCodeRedeemSheet(scene, cont::completionHandler)}```**Note:** Suspendable functions do not return an `NSError` object. Instead, they throw a corresponding exception. Make sure to handle these exceptions appropriately.---## How to Use### Snapshot BuildsSnapshots are deployed to the Sonatype snapshot repository.  Add the following repository to your `build.gradle` file:```groovyrepositories {    maven { url 'https://central.sonatype.com/repository/maven-snapshots' }}```### DependenciesBindings are available as the following artifact:```groovydependencies {    implementation "com.mobidevelop.robovm:robopods-swift-storekit2-kt:18.2.0.1"}```---## Sample Code```kotlinscope.launch(Dispatchers.Main) {    try {        val storeProducts = ProductKt.getProducts(listOf("product.id.1"))    } catch(e: NSErrorException) {        e.printStackTrace()    }}```---## Sample AppA Kotlin port of Apple’s [*Implementing a Store in Your App Using the StoreKit API*](https://developer.apple.com/documentation/storekit/implementing-a-store-in-your-app-using-the-storekit-api)  is available as part of the [alt-pods-tests](https://github.com/dkimitsa/alt-pods-tests) repository:  [https://github.com/dkimitsa/alt-pods-tests/tree/master/cocoatouch-swift-storekit](https://github.com/dkimitsa/alt-pods-tests/tree/master/cocoatouch-swift-storekit)